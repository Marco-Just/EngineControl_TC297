/******************************************************************************/
/* !Layer           : HAL                                                     */
/* !Component       : CRKHAL                                                  */
/* !Description     : Crankshaft Driver                                       */
/*                                                                            */
/* !File            : CRKHAL_Cfg.c                                            */
/* !Description     : CRKHAL configuration                                    */
/*                                                                            */
/* !Reference       :                                                         */
/*                                                                            */
/* Coding language  : C                                                       */
/*                                                                            */
/* COPYRIGHT VALEO all rights reserved                                        */
/******************************************************************************/
/** 11/10/14, 10:16:14: generated by Genecode v2.6.0.0                        */
/******************************************************************************/

#include "Std_Types.h"
#include "Std_Limits.h"

#include "CRKHAL.h"
#include "CRKHAL_co_cfg.h"
#include "SWFAIL.h"
#include "IfxGtm_Ccu.h"
#include "ANGSCHED.h"
#include "ANGSCHED.h"
#include "IGNHAL.h"
#include "INJHAL.h"
#include "KNWHAL.h"
#include "PMPHAL.h"
#include "PMPHAL.h"
#include "PRSHAL.h"
#include "PTMHAL.h"
#include "TDCHAL.h"



/******************************************************************************/
/* DATA DEFINITION                                                            */
/******************************************************************************/
/*lint -esym(960,5.1) */
#define CRKHAL_START_SEC_VAR_CLEARED_16BIT
#include "CRKHAL_MemMap.h"

/* Declaration of Injection alarm offsets                                     */
uint16 CRKHAL_u16Offset_INJ_1_ANGLE;
uint16 CRKHAL_u16Offset_INJ_2_ANGLE;
uint16 CRKHAL_u16Offset_INJ_3_ANGLE;

#define CRKHAL_STOP_SEC_VAR_CLEARED_16BIT
#include "CRKHAL_MemMap.h"

/******************************************************************************/
/*  FUNCTIONS DEFINITION                                                      */
/******************************************************************************/

#define CRKHAL_START_SEC_CODE
#include "CRKHAL_MemMap.h"

/******************************************************************************/
/* !MComment: AtomxChy Callback Functions                                     */
/******************************************************************************/

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom3Ch2Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom3Ch2       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom3Ch2Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coANGSCHED_1_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_ANGSCHED_1,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_ANGSCHED_1]);

   #endif /* if (CRKHAL_coANGSCHED_1_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   ANGSCHED_vidInterrupt_ALARM_1();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom3Ch3Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom3Ch3       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom3Ch3Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coANGSCHED_2_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_ANGSCHED_2,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_ANGSCHED_2]);

   #endif /* if (CRKHAL_coANGSCHED_2_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   ANGSCHED_vidInterrupt_ALARM_2();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom0Ch7Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom0Ch7       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom0Ch7Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);


   #if (CRKHAL_coCOIL_A_CMD_RETRIGGER_ALARM == CRKHAL_coENABLED)

   if (IrqNotifVal == ATOM_CCU_1)
   {

   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_COIL_A_CMD,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_COIL_A_CMD]);

   }
   #endif /* if (CRKHAL_coCOIL_A_CMD_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   it_bobine_a(IrqNotifVal);
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom0Ch2Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom0Ch2       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom0Ch2Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);


   #if (CRKHAL_coCOIL_B_CMD_RETRIGGER_ALARM == CRKHAL_coENABLED)

   if (IrqNotifVal == ATOM_CCU_1)
   {

   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_COIL_B_CMD,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_COIL_B_CMD]);

   }
   #endif /* if (CRKHAL_coCOIL_B_CMD_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   it_bobine_b(IrqNotifVal);
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom0Ch5Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom0Ch5       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom0Ch5Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);


   #if (CRKHAL_coCOIL_C_CMD_RETRIGGER_ALARM == CRKHAL_coENABLED)

   if (IrqNotifVal == ATOM_CCU_1)
   {

   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_COIL_C_CMD,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_COIL_C_CMD]);

   }
   #endif /* if (CRKHAL_coCOIL_C_CMD_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   it_bobine_c(IrqNotifVal);
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom3Ch0Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom3Ch0       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom3Ch0Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coIGN_REF_TEETH_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_IGN_REF_TEETH,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_IGN_REF_TEETH]);

   #endif /* if (CRKHAL_coIGN_REF_TEETH_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   it_dent_ref();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom1Ch3Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom1Ch3       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom1Ch3Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);


   #if (CRKHAL_coINJ_1_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED)

   if (IrqNotifVal == ATOM_CCU_1)
   {

   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_INJ_1_ANGLE,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_INJ_1_ANGLE]);

   }
   #endif /* if (CRKHAL_coINJ_1_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   INJHAL_vidAngleTimeNotif_CM_66(IrqNotifVal);
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom1Ch4Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom1Ch4       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom1Ch4Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);


   #if (CRKHAL_coINJ_2_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED)

   if (IrqNotifVal == ATOM_CCU_1)
   {

   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_INJ_2_ANGLE,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_INJ_2_ANGLE]);

   }
   #endif /* if (CRKHAL_coINJ_2_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   INJHAL_vidAngleTimeNotif_CM_45(IrqNotifVal);
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom1Ch5Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom1Ch5       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom1Ch5Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);


   #if (CRKHAL_coINJ_3_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED)

   if (IrqNotifVal == ATOM_CCU_1)
   {

   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_INJ_3_ANGLE,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_INJ_3_ANGLE]);

   }
   #endif /* if (CRKHAL_coINJ_3_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   INJHAL_vidAngleTimeNotif_CM_24(IrqNotifVal);
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom2Ch4Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom2Ch4       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom2Ch4Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coKNW_SAMPLING_WIN_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_KNW_SAMPLING_WIN,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_KNW_SAMPLING_WIN]);

   #endif /* if (CRKHAL_coKNW_SAMPLING_WIN_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   KNWHAL_vidItKnockWindow();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom3Ch5Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom3Ch5       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom3Ch5Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coSPILL_EVENT_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_SPILL_EVENT_ANGLE,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_SPILL_EVENT_ANGLE]);

   #endif /* if (CRKHAL_coSPILL_EVENT_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   PMPHAL_vidSpillEventNotification();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom1Ch2Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom1Ch2       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom1Ch2Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coM_CMD_GDI_PMP_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE]);

   #endif /* if (CRKHAL_coM_CMD_GDI_PMP_ANGLE_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   PMPHAL_vidSpillCmdNotification();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom2Ch7Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom2Ch7       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom2Ch7Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coIT_1_4_TDC_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_IT_1_4_TDC,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_IT_1_4_TDC]);

   #endif /* if (CRKHAL_coIT_1_4_TDC_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   PRSHAL_vidInterrupt();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom3Ch4Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom3Ch4       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom3Ch4Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coPTMHAL_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_PTMHAL,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_PTMHAL]);

   #endif /* if (CRKHAL_coPTMHAL_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   PTMHAL_vidAlarmManagement();
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidAtom2Ch6Callback                                  */
/* !Description : Callback function of angular alarm linked to Atom2Ch6       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidAtom2Ch6Callback(uint8 ModuleType, uint8 ModuleNo, uint8 ChannelNo, uint16 IrqNotifVal)
{
   COMPILER_UNUSED_PARAMETER(ModuleType);
   COMPILER_UNUSED_PARAMETER(ModuleNo);
   COMPILER_UNUSED_PARAMETER(ChannelNo);
   COMPILER_UNUSED_PARAMETER(IrqNotifVal);

   #if (CRKHAL_coTDC_RETRIGGER_ALARM == CRKHAL_coENABLED)


   /* Re-Trigger the Alarm */
   CRKHAL_vidSetAbsAlarm(CRKHAL_u8ALARM_TDC,
                         (uint16)CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_TDC]);

   #endif /* if (CRKHAL_coTDC_RETRIGGER_ALARM == CRKHAL_coENABLED) */

   TDCHAL_vidInterrupt();
}



/******************************************************************************/
/* !MComment: APIs Definition                                                 */
/******************************************************************************/

/******************************************************************************/
/* !FuncName    : CRKHAL_vidEnableAlarmNotif                                  */
/* !Description : Enable the notification when the engine angle position      */
/*                reaches the "u8Channel" alarm programmed value.             */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidEnableAlarmNotif(uint8 u8Channel)
{
   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_ANGSCHED_2:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_COIL_A_CMD:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_COIL_B_CMD:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_COIL_C_CMD:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_IT_1_4_TDC:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_PTMHAL:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_TDC:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomEnableNotif(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                   IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_CAMHAL_INCAM_EDGE_MNG:
         IfxGtm_vidTimEnableNotif(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG]);
         break;
      case CRKHAL_u8ALARM_CAMHAL_EXCAM_EDGE_MNG:
         IfxGtm_vidTimEnableNotif(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG]);
         break;
      default:
         SWFAIL_vidSoftwareErrorHook();
         break;
   }
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidDisableAlarmNotif                                 */
/* !Description : Disable the notification when the engine angle position     */
/*                reaches the "u8Channel" alarm programmed value.             */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidDisableAlarmNotif(uint8 u8Channel)
{
   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_ANGSCHED_2:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_COIL_A_CMD:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_COIL_B_CMD:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_COIL_C_CMD:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_IT_1_4_TDC:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_PTMHAL:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_TDC:
         IfxGtm_vidAtomClearInterrupt(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                      IfxGtm_Compare_Unit_1);
         IfxGtm_vidAtomDisableNotification(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                           IfxGtm_Compare_Unit_1);
         break;
      case CRKHAL_u8ALARM_CAMHAL_INCAM_EDGE_MNG:
         IfxGtm_vidTimDisableNotification(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG]);
         break;
      case CRKHAL_u8ALARM_CAMHAL_EXCAM_EDGE_MNG:
         IfxGtm_vidTimDisableNotification(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG]);
         break;
      default:
         SWFAIL_vidSoftwareErrorHook();
         break;
   }
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidActivateAlarmMode                                 */
/* !Description : Activate the "u8Channel" alarm with the "u8Mode" action of  */
/*                the associated output on alarm event.                       */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidActivateAlarmMode(uint8 u8Channel, uint8 u8Mode)
{
   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_ANGSCHED_2:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_CAMHAL_INCAM_EDGE_MNG:
         switch (u8Mode)
         {
            case MODE_CAP_RISING:
               IfxGtm_vidTimWriteMode(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG],
                                      MODE_CAP_RISING);
               break;
            case MODE_CAP_FALLING:
               IfxGtm_vidTimWriteMode(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG],
                                      MODE_CAP_FALLING);
               break;
            case MODE_CAP_BOTH_EDGES:
               IfxGtm_vidTimWriteMode(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG],
                                      MODE_CAP_BOTH_EDGES);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_CAMHAL_EXCAM_EDGE_MNG:
         switch (u8Mode)
         {
            case MODE_CAP_RISING:
               IfxGtm_vidTimWriteMode(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG],
                                      MODE_CAP_RISING);
               break;
            case MODE_CAP_FALLING:
               IfxGtm_vidTimWriteMode(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG],
                                      MODE_CAP_FALLING);
               break;
            case MODE_CAP_BOTH_EDGES:
               IfxGtm_vidTimWriteMode(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG],
                                      MODE_CAP_BOTH_EDGES);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_COIL_A_CMD:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_COIL_B_CMD:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_COIL_C_CMD:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_IT_1_4_TDC:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_PTMHAL:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      case CRKHAL_u8ALARM_TDC:
         switch (u8Mode)
         {
            case MODE_OUTPUT_0:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_INACT);
               break;
            case MODE_OUTPUT_1:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_ACTIVE);
               break;
            case MODE_OUTPUT_TOGGLE:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_TOGGLE);
               break;
            case MODE_NO_ACTION:
               IfxGtm_vidAtomWriteMode(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                       CCU1_ONLY_OUT_NO_CHANGE);
               break;
            default:
               SWFAIL_vidSoftwareErrorHook();
               break;
         }
         break;
      default:
         SWFAIL_vidSoftwareErrorHook();
         break;
   }
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidDeactivateAlarmMode                               */
/* !Description : No action shall be done (no notification nor output action) */
/*                when engine angle position reaches programmed alarm value.  */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidDeactivateAlarmMode(uint8 u8Channel)
{
   Std_ReturnType udtLocalRetValue;
   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_ANGSCHED_2:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_CAMHAL_INCAM_EDGE_MNG:
         udtLocalRetValue = IfxGtm_udtDeactivateAlarmTim(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG]);
         break;
      case CRKHAL_u8ALARM_CAMHAL_EXCAM_EDGE_MNG:
         udtLocalRetValue = IfxGtm_udtDeactivateAlarmTim(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG]);
         break;
      case CRKHAL_u8ALARM_COIL_A_CMD:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_COIL_B_CMD:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_COIL_C_CMD:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_IT_1_4_TDC:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_PTMHAL:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH);
         break;
      case CRKHAL_u8ALARM_TDC:
         udtLocalRetValue = IfxGtm_vidDeactivateAlarm(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH);
         break;
      default:
         udtLocalRetValue = E_NOT_OK;
         break;
   }
   /* A software fail is generated when channel parameter is wrong or when    */
   /*   IfxGtm_vidDeactivateAlarm return value is E_NOT_OK                    */ 
   if ( udtLocalRetValue != E_OK ) 
   {
      SWFAIL_vidSoftwareErrorHook();
   }
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidSetAbsAlarm                                       */
/* !Description : Set the relative alarm of "u8Channel" channel with the value*/
/*                of "u16AbsoluteAngle" parameter.                            */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidSetAbsAlarm(uint8 u8Channel, uint16 u16AbsoluteAngle)
{
   uint16 u16LocalOffset;

   CRKHAL_au32AbsAngleArray[u8Channel] = (uint32)u16AbsoluteAngle;

   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_ANGSCHED_2:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_COIL_A_CMD:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_COIL_B_CMD:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_COIL_C_CMD:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         u16LocalOffset = CRKHAL_u16OffsetInjDriver;
         CRKHAL_u16Offset_INJ_1_ANGLE = u16LocalOffset;
         u16AbsoluteAngle = u16AbsoluteAngle + u16LocalOffset;
         CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_INJ_1_ANGLE] = u16AbsoluteAngle;
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         u16LocalOffset = CRKHAL_u16OffsetInjDriver;
         CRKHAL_u16Offset_INJ_2_ANGLE = u16LocalOffset;
         u16AbsoluteAngle = u16AbsoluteAngle + u16LocalOffset;
         CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_INJ_2_ANGLE] = u16AbsoluteAngle;
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         u16LocalOffset = CRKHAL_u16OffsetInjDriver;
         CRKHAL_u16Offset_INJ_3_ANGLE = u16LocalOffset;
         u16AbsoluteAngle = u16AbsoluteAngle + u16LocalOffset;
         CRKHAL_au32AbsAngleArray[CRKHAL_u8ALARM_INJ_3_ANGLE] = u16AbsoluteAngle;
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_IT_1_4_TDC:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_PTMHAL:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      case CRKHAL_u8ALARM_TDC:
         IfxGtm_vidAtomWrite(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                             ((uint32) u16AbsoluteAngle),
                             INACTIVE_CCU0,
                             ((uint8)IfxGtm_Atom_Cmp_Ctrl_TbuGe));
         break;

      default:
         SWFAIL_vidSoftwareErrorHook();
         break;
   }
}

/******************************************************************************/
/* !FuncName    : CRKHAL_vidSetRelAlarm                                       */
/* !Description : Set the relative alarm of "u8Channel" channel with the value*/
/*                of "u16RelativeAngle" parameter.                            */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
void CRKHAL_vidSetRelAlarm(uint8 u8Channel, uint16 u16RelativeAngle)
{
   uint32 u32LocalTmp;

   switch (u8Channel) 
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_ANGSCHED_2:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_COIL_A_CMD:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_COIL_B_CMD:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_COIL_C_CMD:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_IT_1_4_TDC:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_PTMHAL:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      case CRKHAL_u8ALARM_TDC:
         u32LocalTmp = (IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH))
                     + u16RelativeAngle;
         if (u32LocalTmp >= CRKHAL_u16EngineCycleAngle) 
         {
            u32LocalTmp -= CRKHAL_u16EngineCycleAngle;
         }
         IfxGtm_vidAtomCcu1Write(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH,
                                 u32LocalTmp);
         break;

      default:
         SWFAIL_vidSoftwareErrorHook();
         break;
   }
}

/******************************************************************************/
/* !FuncName    : CRKHAL_u16ReadAlarm                                         */
/* !Description : Read the current programmed alarm value for "u8Channel".    */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
uint16 CRKHAL_u16ReadAlarm(uint8 u8Channel)
{
   uint16 u16LocalTmp;
   sint32 s32LocalTmp;

   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_1].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_ANGSCHED_2:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexANGSCHED_2].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_CAMHAL_INCAM_EDGE_MNG:
         s32LocalTmp = (sint32)(IfxGtm_u32TimGPR1Read(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_INCAM_EDGE_MNG]));
         break;
      case CRKHAL_u8ALARM_CAMHAL_EXCAM_EDGE_MNG:
         s32LocalTmp = (sint32)(IfxGtm_u32TimGPR1Read(CRKHAL_akstrAlarmTimCh[CRKHAL_u8TimIndexCAMHAL_EXCAM_EDGE_MNG]));
         break;
      case CRKHAL_u8ALARM_COIL_A_CMD:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_A_CMD].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_COIL_B_CMD:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_B_CMD].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_COIL_C_CMD:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexCOIL_C_CMD].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIGN_REF_TEETH].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_1_ANGLE].GTM_ATOM_CH)) - CRKHAL_u16Offset_INJ_1_ANGLE;
         break;
      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_2_ANGLE].GTM_ATOM_CH)) - CRKHAL_u16Offset_INJ_2_ANGLE;
         break;
      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexINJ_3_ANGLE].GTM_ATOM_CH)) - CRKHAL_u16Offset_INJ_3_ANGLE;
         break;
      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexKNW_SAMPLING_WIN].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexSPILL_EVENT_ANGLE].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexM_CMD_GDI_PMP_ANGLE].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_IT_1_4_TDC:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexIT_1_4_TDC].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_PTMHAL:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexPTMHAL].GTM_ATOM_CH));
         break;
      case CRKHAL_u8ALARM_TDC:
         s32LocalTmp = (sint32)(IfxGtm_u32AtomCcu1Read(CRKHAL_akstrAlarmAtomCh[CRKHAL_u8AtomIndexTDC].GTM_ATOM_CH));
         break;
      default:
         SWFAIL_vidSoftwareErrorHook();
         s32LocalTmp = UINT16_MIN;
         break;
   }

   if (s32LocalTmp < 0)
   {
      s32LocalTmp += ((sint32)CRKHAL_u16EngineCycleAngle);
   }

   u16LocalTmp = ((uint16)s32LocalTmp);
   return (u16LocalTmp);

}

/******************************************************************************/
/* !FuncName    : CRKHAL_u16ReadCounter                                       */
/* !Description : Read current engine angle position in the reference of the  */
/*                "u8Channel".                                                */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
uint16 CRKHAL_u16ReadCounter(uint8 u8Channel)
{
   uint16 u16LocalTmp;
   uint32 u32LocalTmp;
   sint32 s32LocalTmp;
   
   u32LocalTmp = (uint32) CRKHAL_TBU_ANGLE;
   s32LocalTmp = (sint32)(CRKHAL_u16TbuConvRelToAbsAng(u32LocalTmp));
   switch (u8Channel)
   {
      case CRKHAL_u8ALARM_ANGSCHED_1:
         
         break;
      case CRKHAL_u8ALARM_ANGSCHED_2:
         
         break;
      case CRKHAL_u8ALARM_COIL_A_CMD:
         
         break;
      case CRKHAL_u8ALARM_COIL_B_CMD:
         
         break;
      case CRKHAL_u8ALARM_COIL_C_CMD:
         
         break;
      case CRKHAL_u8ALARM_IGN_REF_TEETH:
         
         break;
      case CRKHAL_u8ALARM_INJ_1_ANGLE:
         s32LocalTmp = (s32LocalTmp - (sint32)CRKHAL_u16Offset_INJ_1_ANGLE);
         break;
      case CRKHAL_u8ALARM_INJ_2_ANGLE:
         s32LocalTmp = (s32LocalTmp - (sint32)CRKHAL_u16Offset_INJ_2_ANGLE);
         break;
      case CRKHAL_u8ALARM_INJ_3_ANGLE:
         s32LocalTmp = (s32LocalTmp - (sint32)CRKHAL_u16Offset_INJ_3_ANGLE);
         break;
      case CRKHAL_u8ALARM_KNW_SAMPLING_WIN:
         
         break;
      case CRKHAL_u8ALARM_SPILL_EVENT_ANGLE:
         
         break;
      case CRKHAL_u8ALARM_M_CMD_GDI_PMP_ANGLE:
         
         break;
      case CRKHAL_u8ALARM_IT_1_4_TDC:
         
         break;
      case CRKHAL_u8ALARM_PTMHAL:
         
         break;
      case CRKHAL_u8ALARM_TDC:
         
         break;
      default:
         SWFAIL_vidSoftwareErrorHook();
         s32LocalTmp = UINT16_MIN;
         break;
   }

   if (s32LocalTmp < 0)
   {
      s32LocalTmp += (sint32)CRKHAL_u16EngineCycleAngle;
   }

   u16LocalTmp = (uint16)s32LocalTmp;
   return (u16LocalTmp);
}

#define CRKHAL_STOP_SEC_CODE
#include "CRKHAL_MemMap.h"

/*------------------------------ end of file ---------------------------------*/
