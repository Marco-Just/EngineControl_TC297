/******************************************************************************/
/* !Layer           : HAL                                                     */
/* !Component       : CRKHAL                                                  */
/* !Description     : Crankshaft Driver                                       */
/*                                                                            */
/* !File            : CRKHAL_Cfg_I.h                                          */
/* !Description     : CRKHAL configuration                                    */
/*                                                                            */
/* !Reference       :                                                         */
/*                                                                            */
/* Coding language  : C                                                       */
/*                                                                            */
/* COPYRIGHT VALEO all rights reserved                                        */
/******************************************************************************/
/** 11/10/14, 10:16:14: generated by Genecode v2.6.0.0                        */
/******************************************************************************/

#ifndef CRKHAL_CFG_I_H
#define CRKHAL_CFG_I_H


#include "Std_Types.h"
#include "CRKHAL.h"
#include "CRKHAL_L.h"
#include "IfxGtm_Typ.h"
#include "CAMHAL.h"

#define CRKHAL_udtMAX_ALARM_COMPARE_CHANNELS 15

#define CRKHAL_udtMAX_ALARM_CAPTURE_CHANNELS 2

/******************************************************************************/
/* Internal Data                                                              */
/******************************************************************************/
#define CRKHAL_START_SEC_VAR_CLEARED_32BIT
#include "CRKHAL_MemMap.h"

extern uint32 CRKHAL_au32AbsAngleArray[CRKHAL_udtMAX_ALARM_COMPARE_CHANNELS];

#define CRKHAL_STOP_SEC_VAR_CLEARED_32BIT
#include "CRKHAL_MemMap.h"

#define CRKHAL_START_SEC_CONST_UNSPECIFIED
#include "CRKHAL_MemMap.h"

extern const Ifx_GTM_ATOM_STRUCT CRKHAL_akstrAlarmAtomCh[CRKHAL_udtMAX_ALARM_COMPARE_CHANNELS];

#define CRKHAL_STOP_SEC_CONST_UNSPECIFIED
#include "CRKHAL_MemMap.h"

#define CRKHAL_START_SEC_VAR_INIT_UNSPECIFIED
#include "CRKHAL_MemMap.h"

extern volatile Ifx_GTM_TIM_CH* CRKHAL_akstrAlarmTimCh[CRKHAL_udtMAX_ALARM_CAPTURE_CHANNELS];

#define CRKHAL_STOP_SEC_VAR_INIT_UNSPECIFIED
#include "CRKHAL_MemMap.h"

/******************************************************************************/
/* DEFINES                                                                    */
/******************************************************************************/
/* Synchronization methods defines                                            */
#define CRKHAL_snCAMHAL CAMHAL
#ifndef CRKHAL_snCAMHAL
   #define CRKHAL_snCAMHAL CAMHAL
#endif
#define CRKHAL_snCAMEXHAL CAMEXHAL
#ifndef CRKHAL_snCAMHAL
   #define CRKHAL_snCAMHAL CAMHAL
#endif


/* CRKHAL_udtMETHOD_READ_CYL_NB defines                                       */
#define CRKHAL_udtMETHOD_READ_CYL_NB_CAMHAL(enuCylinderNumber) CAMHAL_udtReadCylinderNumber(CAMHAL_udtCH_CM_81,enuCylinderNumber)
#define CRKHAL_udtMETHOD_READ_CYL_NB_CAMEXHAL(enuCylinderNumber) CAMHAL_udtReadCylinderNumber(CAMHAL_udtCH_CM_72,enuCylinderNumber)


/* Default cylinders defines.                                                 */
#define CRKHAL_DEFAULT_CYL_THREE_CYL CRKHAL_udtFIRST_CYLINDER
#define CRKHAL_DEFAULT_CYL_FOUR_CYL CRKHAL_udtFIRST_CYLINDER

/******************************************************************************/
/* MACROS                                                                     */
/******************************************************************************/

/******************************************************************************/
/*                                                                            */
/* !Description : Reads TIM configurations wrt to configured CAM Alarms       */
/* !Number      : V                                                           */
/* !Reference   : 0x                                                          */
/*                                                                            */
/******************************************************************************/

#define CRKHAL_snGET_TIM_FROM_CFG(snCamName) \
   CRKHAL_sn##snCamName##_TIM

#define CRKHAL_snGET_TIM_Channel_FROM_CFG(snCamName) \
   CRKHAL_sn##snCamName##_CHANNEL

/******************************************************************************/
/* !FuncName    : CRKHAL_vidSYNC_CYLINDER_NUMBER                              */
/* !Description : Reads the CRKHAL_enuCylinderNumber using the configured     */
/*                methods.                                                    */
/* !LastAuthor  : L. Baglin                                                   */
/******************************************************************************/
#define CRKHAL_vidSYNC_CYLINDER_NUMBER() \
do \
{ \
   Std_ReturnType udtLocalStatus; \
   \
   \
   udtLocalStatus = (Std_ReturnType)E_NOT_OK; \
   CRKHAL_vidMETHOD_SYNC(CRKHAL_snCAMHAL, CRKHAL_snCAMHAL, udtLocalStatus); \
   if (udtLocalStatus == (Std_ReturnType)E_NOT_OK) \
   { \
   CRKHAL_vidMETHOD_SYNC(CRKHAL_snCAMEXHAL, CRKHAL_snCAMHAL, udtLocalStatus); \
   } \
   \
   if (udtLocalStatus == (Std_ReturnType)E_NOT_OK) \
   { \
      CRKHAL_udtSET_DEFAULT_CYL(CRKHAL_enuCylinderNumber); \
   } \
} \
while (0)


/******************************************************************************/
/* INTERNAL FUNCTIONS DECLARATION                                             */
/******************************************************************************/
#define CRKHAL_START_SEC_CODE
#include "CRKHAL_MemMap.h"

extern void CRKHAL_vidInitAlarmChannels(void);
extern void CRKHAL_vidUpdateAngAlarms(uint16 u16AngleOffset);

#define CRKHAL_STOP_SEC_CODE
#include "CRKHAL_MemMap.h"

#endif /* CRKHAL_CFG_I_H */

/*------------------------------ end of file ---------------------------------*/