/**********************************************************************************************************************/
/* !Layer           : HAL                                                                                             */
/* !Component       : CJ135                                                                                           */
/* !Description     : Driver for Robert Bosch GmbH CJ135                                                              */
/*                                                                                                                    */
/* !File            : CJ135_Cfg.c                                                                                     */
/* !Description     : Configuration of the CJ135 component.                                                           */
/*                                                                                                                    */
/* !Reference       :                                                                                                 */
/*                                                                                                                    */
/* Coding language  : C                                                                                               */
/*                                                                                                                    */
/* COPYRIGHT VALEO all rights reserved                                                                                */
/**********************************************************************************************************************/
/* Dimension Informations
 * %PCMS_HEADER_SUBSTITUTION_START:%
 * The PID has this format: <Product ID>:<Item ID>.<Variant>-<Item Type>;<Revision>
 * %PID: P2017_BSW:0A188686.A-SRC;1 %
 * %PCMS_HEADER_SUBSTITUTION_END:%
 **********************************************************************************************************************/
/** 11/10/14, 10:16:14: generated by Genecode v2.6.0.0                                                                */
/**********************************************************************************************************************/


#include "Std_Types.h"
#include "CJ135_Types.h"
#include "CJ135_Private.h"
#include "CJ135_Cfg.h"
#include "CJ135_Spi.h"
#include "Spi.h"



/**********************************************************************************************************************/
/* CONSTANTS                                                                                                          */
/**********************************************************************************************************************/

#define CJ135_START_SEC_CONST_UNSPECIFIED
#include "CJ135_MemMap.h"

const CJ135_tstrConfig CJ135_akstrConfig[CJ135_u8NB_OF_DEVICE] =
{

   /* U2450 */
   /*******************************************************************************************************************/
   {
   /* .udtSpiChannelId             = */ SpiConf_SpiChannel_CJ135_U2450_SPI_CHANNEL,
   /* .udtSpiSequenceId            = */ SpiConf_SpiSequence_CJ135_U2450_SPI_SEQ,
   /* .udtDgohalActuatorChannel    = */ DGOHAL_udtCJ135_U2450_ACT_CH,
   /* .udtDgohalEcuChannel         = */ DGOHAL_udtCJ135_U2450_ECU_CH,
   /* .pu16Rcal                     = */ &CJ135_ku16RcalResistor,
   /* .pu16Rgnds                    = */ &CJ135_ku16RgndsResistor,
   },


};

#define CJ135_STOP_SEC_CONST_UNSPECIFIED
#include "CJ135_MemMap.h"


/**********************************************************************************************************************/
/* CALIBRATIONS                                                                                                       */
/**********************************************************************************************************************/

#define CJ135_START_SEC_CALIB_16BIT
#include "CJ135_MemMap.h"


const uint16 CJ135_ku16RcalResistor = 0;
const uint16 CJ135_ku16RgndsResistor = 0;


#define CJ135_STOP_SEC_CALIB_16BIT
#include "CJ135_MemMap.h"


/**********************************************************************************************************************/
/* FUNCTIONS                                                                                                          */
/**********************************************************************************************************************/

#define CJ135_START_SEC_CODE
#include "CJ135_MemMap.h"


/**********************************************************************************************************************/
/* !FuncName    : CJ135_vidTxConfirmation_U2450                     */
/* !Description : Function to called by SPI Handler on SPI Tx confirmation                                            */
/* !LastAuthor  : T. Boucher-Lambert                                                                                  */
/**********************************************************************************************************************/
void CJ135_vidTxConfirmation_U2450(void)
{
   uint16         u16LocalRxBuffer;

   /* TODO: check the SPI return value ? */
   (void)Spi_ReadIB(SpiConf_SpiChannel_CJ135_U2450_SPI_CHANNEL, (uint8*)&u16LocalRxBuffer);
   /* Data is in the Low Significant Byte */
   CJ135_vidSpiTxConfirmation(&CJ135_akstrConfig[CJ135_u8U2450], &CJ135_astrData[CJ135_u8U2450], u16LocalRxBuffer);
}

/**********************************************************************************************************************/
/* !FuncName    : CJ135_vidEdgeDetected_U2450                       */
/* !Description : Function called by MCAL ICU on falling edge detection                                               */
/* !LastAuthor  : T. Boucher-Lambert                                                                                  */
/**********************************************************************************************************************/
void CJ135_vidEdgeDetected_U2450(void)
{
   ActivateTask(OSTSK_S_CJ135_U2450_IRQ);
}

/**********************************************************************************************************************/
/* !FuncName    : CJ135_vidEndIrqTimer_U2450                       */
/* !Description : Function called by MCAL GPT when timer is finished                                                  */
/* !LastAuthor  : T. Boucher-Lambert                                                                                  */
/**********************************************************************************************************************/
void CJ135_vidEndIrqTimer_U2450(void)
{
   CJ135_vidReceiveFirstIRQ(&CJ135_astrData[CJ135_u8U2450]);
}




#define CJ135_STOP_SEC_CODE
#include "CJ135_MemMap.h"

/*----------------------------------------------- end of file --------------------------------------------------------*/

