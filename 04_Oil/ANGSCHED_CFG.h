/******************************************************************************/
/* !Layer           : HAL                                                     */
/* !Component       : ANGSCHED                                                */
/* !Description     : Angular scheduler Component                             */
/*                                                                            */
/* !File            : ANGSCHED_CFG.h                                          */
/* !Description     : ANGSCHED Configuration                                  */
/*                                                                            */
/* !Reference       : V03 NT 10 08984                                         */
/*                                                                            */
/* Coding language  : C                                                       */
/*                                                                            */
/* COPYRIGHT VALEO all rights reserved                                        */
/******************************************************************************/
/** 11/10/14, 10:16:14: generated by Genecode v2.6.0.0                        */
/******************************************************************************/
#ifndef ANGSCHED_CFG_H
#define ANGSCHED_CFG_H

#include "Std_Types.h"
#include "ANGSCHED.h"
#include "ANGSCHED_L.h"
#include "ANGSCHED_I.h"
#include "ANGSCHED_TYPES.h"
#include "CRKHAL.h"
#include "SWFAIL.h"

/******************************************************************************/
/* DEFINES                                                                    */
/******************************************************************************/

/* CRKHAL Channels                                                            */
#define ANGSCHED_CRKHAL_CH_ALARM_1 CRKHAL_u8ALARM_ANGSCHED_1
#define ANGSCHED_CRKHAL_CH_ALARM_2 CRKHAL_u8ALARM_ANGSCHED_2


/******************************************************************************/
/* CONSTANTS DECLARATIONS                                                     */
/******************************************************************************/

#define ANGSCHED_START_SEC_CONST_UNSPECIFIED
#include "ANGSCHED_MemMap.h"

extern const ANGSCHED_tpfvidCallback ANGSCHED_kapfvidCallbacks[ANGSCHED_u8CALLBACKS_NUMBER];

#define ANGSCHED_STOP_SEC_CONST_UNSPECIFIED
#include "ANGSCHED_MemMap.h"


/******************************************************************************/
/* CALIBRATIONS DECLARATIONS                                                  */
/******************************************************************************/

#define ANGSCHED_START_SEC_CALIB_UNSPECIFIED
#include "ANGSCHED_MemMap.h"

extern const ANGSCHED_tudtCallbackMask ANGSCHED_kaudtEvtMsk_ALARM_1[ANGSCHED_u8MAX_SETPOINTS_ALARM_1];
extern const ANGSCHED_tudtCallbackMask ANGSCHED_kaudtEvtMsk_ALARM_2[ANGSCHED_u8MAX_SETPOINTS_ALARM_2];

#define ANGSCHED_STOP_SEC_CALIB_UNSPECIFIED
#include "ANGSCHED_MemMap.h"

#define ANGSCHED_START_SEC_CALIB_16BIT
#include "ANGSCHED_MemMap.h"

extern const uint16 ANGSCHED_kau16Angles_ALARM_1[ANGSCHED_u8MAX_SETPOINTS_ALARM_1];
extern const uint16 ANGSCHED_kau16Angles_ALARM_2[ANGSCHED_u8MAX_SETPOINTS_ALARM_2];

#define ANGSCHED_STOP_SEC_CALIB_16BIT
#include "ANGSCHED_MemMap.h"

/******************************************************************************/
/* MACRO FUNCTIONS                                                            */
/******************************************************************************/

/******************************************************************************/
/*                                                                            */
/* !Description: Init angsched                                                */
/*                                                                            */
/* !LastAuthor: Y. Badr                                                       */
/******************************************************************************/
#define ANGSCHED_vidINTERNAL_INIT() \
do \
{ \
   ANGSCHED_vidINIT_ALARM(ALARM_1);\
   ANGSCHED_vidINIT_ALARM(ALARM_2);\
} \
while(0)

/******************************************************************************/
/*                                                                            */
/* !Description: Enable angsched alarm                                        */
/*                                                                            */
/* !LastAuthor: Y. Badr                                                       */
/******************************************************************************/
#define ANGSCHED_vidENABLE_ALARM(u8AngschedAlarm) \
do \
{ \
   switch(u8AngschedAlarm) \
   { \
   case ANGSCHED_u8ALARM_1: \
      if(  (ANGSCHED_ku8AnglesNum_ALARM_1 > UINT8_MIN) \
        && (ANGSCHED_bEnabled_ALARM_1 == FALSE)) \
      { \
         ANGSCHED_bEnabled_ALARM_1 = TRUE; \
         ANGSCHED_vidACTIVATE_ALARM(ALARM_1); \
         ANGSCHED_vidFIND_NEAREST_ANGLE(ALARM_1); \
         ANGSCHED_vidPROGRAM_NEXT_ANGLE(ALARM_1); \
         ANGSCHED_vidENABLE_ALARM_NOTIF(ALARM_1); \
      } \
      break; \
   case ANGSCHED_u8ALARM_2: \
      if(  (ANGSCHED_ku8AnglesNum_ALARM_2 > UINT8_MIN) \
        && (ANGSCHED_bEnabled_ALARM_2 == FALSE)) \
      { \
         ANGSCHED_bEnabled_ALARM_2 = TRUE; \
         ANGSCHED_vidACTIVATE_ALARM(ALARM_2); \
         ANGSCHED_vidFIND_NEAREST_ANGLE(ALARM_2); \
         ANGSCHED_vidPROGRAM_NEXT_ANGLE(ALARM_2); \
         ANGSCHED_vidENABLE_ALARM_NOTIF(ALARM_2); \
      } \
      break; \
   default: \
      SWFAIL_vidSoftwareErrorHook(); \
      break; \
   } \
} \
while(0)

/******************************************************************************/
/*                                                                            */
/* !Description: Disable angsched alarm                                       */
/*                                                                            */
/* !LastAuthor: Y. Badr                                                       */
/******************************************************************************/
#define ANGSCHED_vidDISABLE_ALARM(u8AngschedAlarm) \
do \
{ \
   switch(u8AngschedAlarm) \
   { \
   case ANGSCHED_u8ALARM_1: \
      ANGSCHED_vidINIT_ALARM(ALARM_1); \
      break; \
   case ANGSCHED_u8ALARM_2: \
      ANGSCHED_vidINIT_ALARM(ALARM_2); \
      break; \
   default: \
      SWFAIL_vidSoftwareErrorHook(); \
      break; \
   } \
} \
while(0)


/******************************************************************************/
/* FUNCTIONS DECLARATION                                                      */
/******************************************************************************/

#define ANGSCHED_START_SEC_CODE
#include "ANGSCHED_MemMap.h"

void ANGSCHED_vidInterrupt_ALARM_1(void);
void ANGSCHED_vidInterrupt_ALARM_2(void);

#define ANGSCHED_STOP_SEC_CODE
#include "ANGSCHED_MemMap.h"


#endif /* ANGSCHED_CFG_H */

/*------------------------------ end of file ---------------------------------*/
